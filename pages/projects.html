<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Проекты - Темираев Максим</title>
    
    <!-- Critical theme initialization -->
    <script>
        (function() {
            // Set theme immediately to prevent flash
            try {
                const savedTheme = localStorage.getItem('theme');
                const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                const theme = savedTheme || (systemPrefersDark ? 'dark' : 'light');
                
                document.documentElement.setAttribute('data-theme', theme);
                window.initialTheme = theme;
            } catch (e) {
                document.documentElement.setAttribute('data-theme', 'light');
            }
        })();
    </script>
    
    <link rel="stylesheet" href="../styles/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <header class="header">
        <nav class="nav container">
            <div class="nav__brand">
                <div class="logo">TM</div>
                <span class="nav__name">Темираев Максим</span>
            </div>
            <ul class="nav__menu">
                <li class="nav__item"><a href="../index.html" class="nav__link">Главная</a></li>
                <li class="nav__item"><a href="projects.html" class="nav__link active">Проекты</a></li>
                <li class="nav__item"><a href="diary.html" class="nav__link">Дневник</a></li>
                <li class="nav__item"><a href="contacts.html" class="nav__link">Контакты</a></li>
            </ul>
            <div class="nav__actions">
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="nav__toggle" id="navToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </nav>
    </header>

    <main class="main">
        <div class="container">
            <div class="page-header">
                <h1 class="page-title">Мои проекты</h1>
                <p class="page-subtitle">Коллекция учебных и личных работ</p>
            </div>

            <!-- Filters -->
            <div class="filters">
                <button class="filter-btn active" data-filter="all">Все</button>
                <button class="filter-btn" data-filter="html">HTML/CSS</button>
                <button class="filter-btn" data-filter="js">JavaScript</button>
                <button class="filter-btn" data-filter="react">React</button>
            </div>

            <!-- Projects Grid 3x3 -->
            <div class="projects-grid three-column">
                <!-- Project 1 -->
                <div class="project-card clickable" data-category="html" data-project="1">
                    <div class="project__image">
                        <img src="../images/personal-website1.jpg" alt="Личный сайт-портфолио" class="project__img">
                        <div class="project__overlay">
                            <i class="fas fa-expand-arrows-alt"></i>
                        </div>
                        <div class="project__tags">
                            <span class="tag tag--html">HTML</span>
                            <span class="tag tag--css">CSS</span>
                        </div>
                    </div>
                    <div class="project__content">
                        <h3 class="project__title">Личный сайт-портфолио</h3>
                        <p class="project__description">
                            Современный адаптивный веб-сайт с анимациями, темной темой и интерактивными элементами.
                        </p>
                        <div class="project__meta">
                            <span class="project__date">Январь 2024</span>
                            <span class="project__status completed">Завершен</span>
                        </div>
                    </div>
                </div>

                <!-- Project 2 -->
                <div class="project-card clickable" data-category="js" data-project="2">
                    <div class="project__image">
                        <img src="../images/todo-app1.jpg" alt="Todo-приложение" class="project__img">
                        <div class="project__overlay">
                            <i class="fas fa-expand-arrows-alt"></i>
                        </div>
                        <div class="project__tags">
                            <span class="tag tag--js">JavaScript</span>
                            <span class="tag tag--localstorage">LocalStorage</span>
                        </div>
                    </div>
                    <div class="project__content">
                        <h3 class="project__title">Todo-приложение</h3>
                        <p class="project__description">
                            Приложение для управления задачами с фильтрацией и локальным сохранением данных.
                        </p>
                        <div class="project__meta">
                            <span class="project__date">Февраль 2024</span>
                            <span class="project__status completed">Завершен</span>
                        </div>
                    </div>
                </div>

                <!-- Project 3 -->
                <div class="project-card clickable" data-category="react" data-project="3">
                    <div class="project__image">
                        <img src="../images/ecommerce1.jpg" alt="Интернет-магазин" class="project__img">
                        <div class="project__overlay">
                            <i class="fas fa-expand-arrows-alt"></i>
                        </div>
                        <div class="project__tags">
                            <span class="tag tag--react">React</span>
                            <span class="tag tag--api">API</span>
                        </div>
                    </div>
                    <div class="project__content">
                        <h3 class="project__title">Интернет-магазин</h3>
                        <p class="project__description">
                            Прототип интернет-магазина с корзиной товаров и оформлением заказа.
                        </p>
                        <div class="project__meta">
                            <span class="project__date">Март 2024</span>
                            <span class="project__status in-progress">В разработке</span>
                        </div>
                    </div>
                </div>

                <!-- Project 4 -->
                <div class="project-card clickable" data-category="html" data-project="4">
                    <div class="project__image">
                        <img src="../images/landing-page.jpg" alt="Лендинг компании" class="project__img">
                        <div class="project__overlay">
                            <i class="fas fa-expand-arrows-alt"></i>
                        </div>
                        <div class="project__tags">
                            <span class="tag tag--html">HTML</span>
                            <span class="tag tag--css">CSS</span>
                            <span class="tag tag--bootstrap">Bootstrap</span>
                        </div>
                    </div>
                    <div class="project__content">
                        <h3 class="project__title">Лендинг компании</h3>
                        <p class="project__description">
                            Современный лендинг для IT-компании с анимациями и адаптивным дизайном.
                        </p>
                        <div class="project__meta">
                            <span class="project__date">Декабрь 2023</span>
                            <span class="project__status completed">Завершен</span>
                        </div>
                    </div>
                </div>

                <!-- Project 5 -->
                <div class="project-card clickable" data-category="js" data-project="5">
                    <div class="project__image">
                        <img src="../images/weather-app.jpg" alt="Погодное приложение" class="project__img">
                        <div class="project__overlay">
                            <i class="fas fa-expand-arrows-alt"></i>
                        </div>
                        <div class="project__tags">
                            <span class="tag tag--js">JavaScript</span>
                            <span class="tag tag--api">API</span>
                        </div>
                    </div>
                    <div class="project__content">
                        <h3 class="project__title">Погодное приложение</h3>
                        <p class="project__description">
                            Приложение для просмотра погоды с использованием внешнего API и геолокации.
                        </p>
                        <div class="project__meta">
                            <span class="project__date">Апрель 2024</span>
                            <span class="project__status completed">Завершен</span>
                        </div>
                    </div>
                </div>

                <!-- Project 6 -->
                <div class="project-card clickable" data-category="react" data-project="6">
                    <div class="project__image">
                        <img src="../images/chat-app.jpg" alt="Чат приложение" class="project__img">
                        <div class="project__overlay">
                            <i class="fas fa-expand-arrows-alt"></i>
                        </div>
                        <div class="project__tags">
                            <span class="tag tag--react">React</span>
                            <span class="tag tag--websocket">WebSocket</span>
                        </div>
                    </div>
                    <div class="project__content">
                        <h3 class="project__title">Чат приложение</h3>
                        <p class="project__description">
                            Real-time чат приложение с комнатами и уведомлениями.
                        </p>
                        <div class="project__meta">
                            <span class="project__date">Май 2024</span>
                            <span class="project__status planned">Запланирован</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Project Modals -->
    <div class="modal" id="projectModal">
        <div class="modal__overlay"></div>
        <div class="modal__content">
            <button class="modal__close" id="modalClose">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal__body">
                <!-- Content will be inserted dynamically -->
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer__content">
                <div class="footer__copyright">
                    &copy; 2025 Темираев Максим. Все права защищены.
                </div>
                <div class="footer__links">
                    <a href="contacts.html" class="footer__link">Контакты</a>
                    <a href="#" class="footer__link">Политика конфиденциальности</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="../scripts/main.js"></script>
    <script>
        // Project data with multiple images
        const projectsData = {
            1: {
                title: "Личный сайт-портфолио",
                images: [
                    "../images/personal-website1.jpg",
                    "../images/personal-website2.jpg",
                    "../images/personal-website3.jpg"
                ],
                description: "Современный адаптивный веб-сайт с анимациями, темной темой и интерактивными элементами. Проект демонстрирует навыки верстки, работы с CSS Grid и Flexbox, а также JavaScript для создания интерактивных элементов.",
                fullDescription: "Этот проект представляет собой полнофункциональный личный сайт-портфолио, разработанный с использованием современных веб-технологий. Сайт полностью адаптивен и корректно отображается на всех устройствах. Реализована система темной/светлой темы с сохранением выбора пользователя в LocalStorage.",
                features: [
                    "Адаптивный дизайн для всех устройств",
                    "CSS Grid и Flexbox для макетов",
                    "JavaScript анимации и интерактивность",
                    "Система смены тем",
                    "Оптимизация производительности",
                    "SEO-оптимизация"
                ],
                technologies: ["HTML5", "CSS3", "JavaScript", "Git"],
                demoLink: "https://demo-personal-site.com",
                codeLink: "https://github.com/NeNoBiL/",
                status: "completed",
                date: "Январь 2024",
                category: "html"
            },
            2: {
                title: "Todo-приложение",
                images: [
                    "../images/todo-app1.jpg",
                    "../images/todo-app2.jpg",
                    "../images/todo-app3.jpg"
                ],
                description: "Полнофункциональное приложение для управления задачами с возможностью фильтрации, поиска и локального сохранения данных.",
                fullDescription: "Простое, но мощное приложение для управления задачами. Позволяет создавать, редактировать, удалять и отмечать задачи как выполненные. Все данные сохраняются в LocalStorage браузера. Реализована фильтрация по статусу задач и поиск по названию.",
                features: [
                    "CRUD операции с задачами",
                    "Local Storage для сохранения данных",
                    "Фильтрация по статусу",
                    "Поиск по задачам",
                    "Валидация форм",
                    "Drag & Drop сортировка"
                ],
                technologies: ["JavaScript", "HTML5", "CSS3", "LocalStorage API"],
                demoLink: "https://demo-todo-app.com",
                codeLink: "https://github.com/NeNoBiL/",
                status: "completed",
                date: "Февраль 2024",
                category: "js"
            },
            3: {
                title: "Интернет-магазин",
                images: [
                    "../images/ecommerce1.jpg",
                    "../images/ecommerce2.jpg",
                    "../images/ecommerce3.jpg"
                ],
                description: "Прототип интернет-магазина с корзиной товаров, фильтрацией по категориям и оформлением заказа.",
                fullDescription: "Полнофункциональный прототип интернет-магазина электроники. Включает каталог товаров с фильтрацией, корзину покупок, оформление заказа и систему управления состоянием приложения. Интегрирован с mock API для получения данных о товарах.",
                features: [
                    "Каталог товаров с фильтрацией",
                    "Корзина покупок",
                    "Оформление заказа",
                    "Управление состоянием",
                    "Адаптивный дизайн",
                    "Интеграция с API"
                ],
                technologies: ["React", "Context API", "React Router", "CSS Modules"],
                demoLink: "https://demo-ecommerce.com",
                codeLink: "https://github.com/NeNoBiL/",
                status: "in-progress",
                date: "Март 2024",
                category: "react"
            },
            4: {
                title: "Лендинг компании",
                images: [
                    "../images/landing-page1.jpg",
                    "../images/landing-page2.jpg",
                    "../images/landing-page3.jpg"
                ],
                description: "Современный лендинг для IT-компании с анимациями, формой обратной связи и адаптивным дизайном.",
                fullDescription: "Корпоративный лендинг для IT-компании, специализирующейся на веб-разработке. Сайт включает анимированные секции, форму обратной связи с валидацией, галерею проектов и адаптивную верстку. Оптимизирован для быстрой загрузки и SEO.",
                features: [
                    "Анимированные секции",
                    "Форма обратной связи",
                    "Адаптивный дизайн",
                    "Оптимизация производительности",
                    "SEO-оптимизация",
                    "Кроссбраузерная совместимость"
                ],
                technologies: ["HTML5", "CSS3", "JavaScript", "Bootstrap 5"],
                demoLink: "https://demo-landing-page.com",
                codeLink: "https://github.com/NeNoBiL/",
                status: "completed",
                date: "Декабрь 2023",
                category: "html"
            },
            5: {
                title: "Погодное приложение",
                images: [
                    "../images/weather-app1.jpg",
                    "../images/weather-app2.jpg",
                    "../images/weather-app3.jpg"
                ],
                description: "Приложение для просмотра погоды с использованием внешнего API и геолокации.",
                fullDescription: "Интуитивное приложение для просмотра текущей погоды и прогноза на несколько дней. Использует OpenWeatherMap API для получения данных. Поддерживает определение местоположения пользователя, поиск по городам и отображение подробной информации о погодных условиях.",
                features: [
                    "Текущая погода и прогноз",
                    "Геолокация",
                    "Поиск по городам",
                    "Детальная информация",
                    "Сохранение избранных городов",
                    "Уведомления о погоде"
                ],
                technologies: ["JavaScript", "Fetch API", "LocalStorage", "CSS3"],
                demoLink: "https://demo-weather-app.com",
                codeLink: "https://github.com/NeNoBiL/",
                status: "completed",
                date: "Апрель 2024",
                category: "js"
            },
            6: {
                title: "Чат приложение",
                images: [
                    "../images/chat-app1.jpg",
                    "../images/chat-app2.jpg",
                    "../images/chat-app3.jpg"
                ],
                description: "Real-time чат приложение с комнатами и уведомлениями.",
                fullDescription: "Современное real-time чат приложение с поддержкой комнат, приватных сообщений и уведомлений. Использует WebSocket для мгновенной передачи сообщений. Включает систему аутентификации, историю сообщений и возможность загрузки файлов.",
                features: [
                    "Real-time сообщения",
                    "Система комнат",
                    "Приватные сообщения",
                    "Уведомления",
                    "Загрузка файлов",
                    "История сообщений"
                ],
                technologies: ["React", "Node.js", "Socket.io", "MongoDB"],
                demoLink: "https://demo-chat-app.com",
                codeLink: "https://github.com/NeNoBiL/",
                status: "planned",
                date: "Май 2024",
                category: "react"
            }
        };

        // Modal functionality
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('projectModal');
            const modalClose = document.getElementById('modalClose');
            const modalOverlay = modal.querySelector('.modal__overlay');
            const projectCards = document.querySelectorAll('.project-card.clickable');

            let currentProjectId = null;
            let currentImageIndex = 0;

            // Open modal on project card click
            projectCards.forEach(card => {
                card.addEventListener('click', function(e) {
                    if (!e.target.closest('.project__links')) {
                        const projectId = this.getAttribute('data-project');
                        currentProjectId = projectId;
                        currentImageIndex = 0;
                        openProjectModal(projectId);
                    }
                });
            });

            // Close modal
            modalClose.addEventListener('click', closeModal);
            modalOverlay.addEventListener('click', closeModal);

            // Close on Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                } else if (e.key === 'ArrowLeft') {
                    navigateImages(-1);
                } else if (e.key === 'ArrowRight') {
                    navigateImages(1);
                }
            });

            function openProjectModal(projectId) {
                const project = projectsData[projectId];
                if (!project) return;

                const modalBody = modal.querySelector('.modal__body');
                modalBody.innerHTML = `
                    <div class="modal-project-vertical">
                        <div class="modal-project__gallery">
                            <div class="image-gallery">
                                <img src="${project.images[0]}" alt="${project.title}" class="modal-project__img active">
                                <button class="gallery-nav gallery-prev" onclick="navigateImages(-1)">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button class="gallery-nav gallery-next" onclick="navigateImages(1)">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                                <div class="image-counter">
                                    <span class="current-image">1</span> / <span class="total-images">${project.images.length}</span>
                                </div>
                                <div class="image-dots">
                                    ${project.images.map((_, index) => 
                                        `<button class="dot ${index === 0 ? 'active' : ''}" onclick="goToImage(${index})"></button>`
                                    ).join('')}
                                </div>
                            </div>
                        </div>
                        <div class="modal-project__content-vertical">
                            <h2 class="modal-project__title">${project.title}</h2>
                            <div class="modal-project__meta">
                                <span class="modal-project__date">${project.date}</span>
                                <span class="modal-project__status ${project.status}">${getStatusText(project.status)}</span>
                            </div>
                            <p class="modal-project__description">${project.fullDescription}</p>
                            
                            <div class="modal-project__section">
                                <h3 class="modal-project__section-title">Основные функции</h3>
                                <ul class="modal-project__features">
                                    ${project.features.map(feature => `<li>${feature}</li>`).join('')}
                                </ul>
                            </div>
                            
                            <div class="modal-project__section">
                                <h3 class="modal-project__section-title">Технологии</h3>
                                <div class="modal-project__technologies">
                                    ${project.technologies.map(tech => `<span class="tech-tag">${tech}</span>`).join('')}
                                </div>
                            </div>
                            
                            <div class="modal-project__links">
                                <a href="${project.demoLink}" target="_blank" class="btn btn--primary">
                                    <i class="fas fa-external-link-alt"></i>
                                    Посмотреть демо
                                </a>
                                <a href="${project.codeLink}" target="_blank" class="btn btn--secondary">
                                    <i class="fab fa-github"></i>
                                    Исходный код
                                </a>
                            </div>
                        </div>
                    </div>
                `;

                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }

            function navigateImages(direction) {
                if (!currentProjectId) return;
                
                const project = projectsData[currentProjectId];
                const totalImages = project.images.length;
                
                currentImageIndex = (currentImageIndex + direction + totalImages) % totalImages;
                updateGallery();
            }

            function goToImage(index) {
                if (!currentProjectId) return;
                
                currentImageIndex = index;
                updateGallery();
            }

            function updateGallery() {
                if (!currentProjectId) return;
                
                const project = projectsData[currentProjectId];
                const galleryImg = document.querySelector('.modal-project__img');
                const currentImageSpan = document.querySelector('.current-image');
                const dots = document.querySelectorAll('.dot');
                
                if (galleryImg) {
                    galleryImg.src = project.images[currentImageIndex];
                    galleryImg.alt = `${project.title} - Изображение ${currentImageIndex + 1}`;
                }
                
                if (currentImageSpan) {
                    currentImageSpan.textContent = currentImageIndex + 1;
                }
                
                dots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === currentImageIndex);
                });
            }

            function closeModal() {
                modal.classList.remove('active');
                document.body.style.overflow = '';
                currentProjectId = null;
                currentImageIndex = 0;
            }

            function getStatusText(status) {
                const statusMap = {
                    'completed': 'Завершен',
                    'in-progress': 'В разработке',
                    'planned': 'Запланирован'
                };
                return statusMap[status] || status;
            }

            // Make functions global for onclick handlers
            window.navigateImages = navigateImages;
            window.goToImage = goToImage;

            // Filter functionality
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const filter = this.getAttribute('data-filter');
                    
                    // Update active button
                    filterButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Filter projects
                    projectCards.forEach(card => {
                        if (filter === 'all' || card.getAttribute('data-category') === filter) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });
        });
    </script>
</body>
</html>